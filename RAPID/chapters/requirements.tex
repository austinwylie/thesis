\chapter{Requirements}
\label{requirements}

The previous discussions overview operators' motivations and practices for pipeline integrity management. We've also covered the geographic and technological framework that RAPID works within---primarily adhering to OGC's Abstract Specification. Alongside external pipeline operating partners, our team established additional requirements for RAPID's domain-specific functionality.

At a high level, our goal is to combine the earlier-mentioned spatial operations and formats with updatable and searchable  geographic data. Partner organizations also require permissioning capabilities so that private and proprietary information is not shared with unprivileged requesters. These characteristics are spelled out in more detail below.\footnote{Of additional note, these requirements are particularly suited to RAPID's \textit{data model}. Other tertiary requirements exist for the REST API---pertaining to its style and usage---but many of those are derived from the central asks in this chapter. Alexa's thesis describes the API's requirements gathering and design processes in depth.}

\section{Input formats}

Throughout our own experimentation and research, GeoJSON and Shapefiles (described in Chapter~\ref{background}) emerged as reasonable starting points for RAPID's file ingestion. There are several reasons:

\begin{description}
  \item[Availability] Many (or even most) public geospatial datasets are archived in one or both of these formats.
  \item[Standardization] While not wholly formulated by the OGC, both GeoJSON and Shapefiles incorporate the Abstract Specification, and other components of the formats are open standards. This, in part, drives their commonness and availability.
  
Shapefiles, primarily Esri's creation for their ArcGIS software, include many standard \textit{and} non-standard appendages and amendments. While some of these are used to enable extended functionality in propriety systems, they're often used for (optional) performance tuning. That is, the most essential vector data is openly specified, and the other components aren't particularly important to us.

\item[Toolsets] Thanks to their standardization and popularity, these formats  are well-supported by many open-source spatial libraries and frameworks. This means a lot of robust, reusable functionality for parsing and validation already exists.

\item[Abstraction and conversion] Again, with the consideration that these vector formats are standardized and built on top of the Abstract Specification, their data types can store and represent the \textit{same information}. Further, these representations can be converted among one another: the vectors of a valid GeoJSON file can be entirely converted to a Shapefile with the same vectors. This also means that end users---even third party developers---don't often need to know the underlying detail of which file format was used at one point or another. In the case that one particular format is required, the conversion is mostly trivial.

\item[GeoJSON readability] GeoJSON's relatively user-friendly and readable syntax (extended from JSON) lets nontechnical stakeholders and contractors still understand (and even generate) structured geospatial data with minimal training and software.

\end{description}

\section{Output formats}
For the same reasons that we settled on GeoJSON and Shapefiles as input formats, they both also made sense as output formats, and data in RAPID can be exported as either (no matter the input format). We can count on numerous external developers and applications to successfully use and understand at least GeoJSON.\footnote{This general decision was helpful for practical purposes, too: with the tools and libraries we're using, it's less difficult to export formats we've already researched and configured for decoding.}

While a commercial, enterprise-ready application might implement several extensive OGC standards for data exchange and parsing---enabling instant plug-and-play functionality for some GISs---GeoJSON, supplemented by Shapefiles, was chosen as a reasonable middle ground, providing still-common formats and some flexibility to developers. It's also not difficult to find and use open-source libraries that convert these formats to other OGC-compliant ones.\footnote{This functionality could be added to RAPID in the future; it just doesn't exist yet.}

\subsection{Related work and standards}
\subsubsection{Web Feature Service}
OGC's Web Feature Service (WFS) is a lengthy and highly-specific standard for geospatial data storage, formatting, and querying---and several implementations exist. While this complex, in-use standard outdoes RAPID's capabilities in some scenarios, there's currently no standard specification for spatial REST APIs.

This gives Alexa and myself the opportunity to create an ecosystem as we see fit---allowing even developers without GIS backgrounds to incorporate RAPID data relatively pain-free (given that they can learn GeoJSON). PolyView,\footnote{Introduced in Section~\ref{polyview_intro} and detailed in~\ref{polyview_details}.} for instance, would not have the resources to interface with a Web Feature Service.

\subsubsection{FeatureServer}

One piece of related work we're aware of, an open-source project from 2013 called FeatureServer (primarily written in Python), incorporates many OGC standards, allowing for automated and full-featured data querying. It adds a REST API, too.

FeatureServer, however, still expects thorough understanding of these specific standards, acting mostly as a set of helper tools---a stepping stone between custom GISs and WFSs.

\section{Modularity and abstraction}
\subsection{Updatable}

With these considerations, however, we still ensure the system is modular enough to incorporate feedback and possibly introduce fuller standards support down the road.



\section{Data layers}

\section{Querying}
\subsection{Monitored regions}


\section{Security and permissioning}





GeoJSON
Shapefiles


Separable data ``layers''

User-modifiable ``views''


Notifications
Permission management


The next chapter explains how RAPID's final design meets these requirements.

